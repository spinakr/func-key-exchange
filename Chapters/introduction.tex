\chapter{Introduction}
\label{chp:intro} 
\section{Motivation}
The communication on the Internet is usually encrypted using encryption keys in either a symmetric or a asymmetric configuration, this is fine when the encryption is transparent to the user as in SSL, but it gets increasingly complicated when the users have to take part in the life cycle. Examples are public key encryption where users have to generate keys and encrypt manually if they want to encrypt in example emails or other files before sending them. Normal none expert users might feel that this process is hard to grasp. Keeping a updated database of public keys for all colleges or verifying signatures every time, to be able to encrypt in not feasible for most users - would it not be better if you could have one key with the capability of encrypting for everybody at your workplace or at your school? Identity-based encryption tries to achieve this by associating keys with identities, so that the identities of a user is their id, typically email or some other id. If you want to establish a secure communication channel to somebody by exchanging keys this could be done in a similar fashion.
In distributed systems users might not want to publish their identity if it is not absolutely necessary, which in most cases it is not. It is more important that the user is legit and have the correct privileges. If we could assure that all users participating in some protocol or application had the right privileges or simply the correct purpose, we could go without knowing the exact identities. Lets say you want to exchange keys and communicate securely with a group of people with the same interests as yourself, but you do not want to reveal your identity for some reason. To keep the discussion serious you would not want extraneous users to interrupt. Since nobody wants to authenticate themself using identities we need to make a decision based on something else - attributes identifying the characteristics of each user. 
 \par This can be achieved using attributes in the encryption or key exchange mechanisms. Attributes can be anything - personal attributes as birth year, gender or nationality, or affiliation to user groups providing access control, where only the group members would be allowed to communicate. Or attributes could be related to certifications or titles, this way you can be assured that the person you are communicating with has knowledge about something you need help with, without knowing the identity. This generalization can also be extended to include systems where the identity is one of, or the only, attribute. Thus achieving identity based systems without the need to generate, distribute and store huge amounts of public keys. 
\par This project describe the term functional key exchange, covering key exchange mechanisms using the mentioned ideas to achieve dynamic group key exchange in a functional manner, focusing on the attribute-based configuration. Not exposing identities if not absolutely necessary is the main focus when discussing possible applications of these functional key exchange methods. There already exist several proposed schemes for both attribute- and identity-based key exchange, but there are few or none examples of systems applying the schemes in real applications. The goal of this project is to see how these schemes work in a real application environment.

\section{Related work}\label{sec:related_work}
The work done by Gorantla et al.\cite{gorantla2010attribute} has a similar construction as the implementation showed in this project, they present a generic one-round \gls{abake} protocol using a more complex structure. Gorantle et al. \cite{kem-group-ke} has shown that key exchange can be done using multiple \glspl{kem}, which will be the approach used in this project as well.
\par Charm \cite{DBLP:Charm13} is a framework for construction of cryptographic functions which also include a set of implemented schemes, these will be used as basis for the implementations in this project. The constructions of \gls{ibe} and \gls{abe} by Waters \cite{ibe_waters09, abe_waters09} are implemented in Charm, with the latter being used directly in this project. The \gls{ibe} implementation is used in the background to compare functional encryption to standard public key encryption mechanisms.

\section{Scope and objectives}\label{sec:scope}

The project will showcase functional encryption schemes, showing how these look when implemented, and present ideas on how these can be used to provide key exchange in various applications. The focus will be on applying an attribute-based key exchange scheme in a real application, based on a construction of attribute-based encryption from the Charm framework \cite{DBLP:Charm13}. This implementation will be extended to a functional key exchange mechanism using a hybrid encryption variant with \gls{abe} as the key encapsulation mechanism and then using the keys from the encapsulations to compute session keys. Code examples from Charm will also be used in conjunction with mathematical definitions to demonstrate \gls{abe} and the Charm framework. 
\par The main goals of the project is thus to:
\begin{itemize}
\item Study and present functional encryption schemes and show how these can be used to exchange keys - using Charm with the included implementations as a tool to demonstrate this.
\item Construct and implement a attribute-based functional key exchange scheme based on \gls{abe}.
\item Implement a \gls{abake} scheme in a distributed, multi-user chat system, achieving secure communication based on attributes.
\end{itemize}

\section{Limitations}\label{sec:limitations}
The project will not try to solve problems related to key distribution and how to deploy a secure and trustworthy key management service. For the proposed system it will be assumed that this kind of service exists.

\section{Method}
The methods used in this project consists of using schemes from the Charm framework, showing how these work and compare the code to the definitions from the papers from which the implementations are based. This should give insight into how the schemes work as well as how Charm looks. Based on the designs and implementations discussed, a key exchange mechanism will be developed, before a working prototype of an application taking advantage of this will be implemented, to show how modern functional key exchange schemes can be utilized in real applications. While researching the different schemes, strengths and weaknesses will be discussed, as well as arguing the decisions made during design and implementation.


\section{Outline}\label{sec:outline}
The background chapter will describe all the components that are essential to both functional encryption and key exchange, including secret sharing, pairing-based encryption and key encapsulation. Public key encryption and identity-based encryption will be compared to show the similarities and differences between functional and non-functional constructions. 
\par The next chapter will first describe functional encryption and \gls{abe}, which is the chosen functional encryption scheme used in the project. The scheme will be presented and described using an implementation from Charm. From this the ideas behind functional key exchange and possible application areas will be presented and discussed.
\par Finally a prototype system will be implemented and presented, using attribute-based encryption and key encapsulation to exchange keys. The system will be a distributed chat using attribute-based key exchange to achieve secure communication with users joining and leaving dynamically.

